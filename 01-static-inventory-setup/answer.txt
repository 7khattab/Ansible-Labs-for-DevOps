# Step 1: Create project directory & inventory file


mkdir -p /home/mohamedkhattab/mylabproject
cat > /home/mohamedkhattab/mylabproject/inventory

[production]
worker2 ansible_host=192.168.1.33
worker1 ansible_host=192.168.1.34

[cairo]
cairo1 ansible_host=192.168.1.12

[ungrouped]
ungrouped1 ansible_host=192.168.1.13




# Step 2: List nodes


ansible all --list-hosts -i /home/mohamedkhattab/mylabproject/inventory
ansible ungrouped --list-hosts -i /home/mohamedkhattab/mylabproject/inventory
ansible cairo --list-hosts -i /home/mohamedkhattab/mylabproject/inventory


# Step 3: Create devops user with hashed password


ansible production -i inventory -m user -a "user=devops password={{ '12345' | password_hash('sha512', 'mysecret') }} state=present"

# Step 4: Create Ansible config file


cat > /home/mohamedkhattab/mylabproject/ansible.cfg
[defaults]
inventory=/home/mohamedkhattab/mylabproject/inventory
remote_user=devops
ask_pass=false


[privilege_escalation]
become=true
become_user=root
become_method=sudo
become_ask_pass=false


# Step 5 & 6: Configure sudo for devops user


ansible production -m shell -a 'echo "devops ALL=(ALL) NOPASSWD:ALL">>/etc/sudoers'


# Step 7: Debug message


ansible production -m debug -a "msg='My first debug msg!'"
